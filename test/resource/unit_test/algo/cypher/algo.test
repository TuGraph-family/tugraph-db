CALL db.createVertexLabel('Loc', 'name', 'name', 'STRING', false);
CALL db.createEdgeLabel('ROAD', '[]', 'cost', 'FLOAT', false);
 CREATE (a:Loc {name:'A'}) CREATE (b:Loc {name:'B'}) CREATE (c:Loc {name:'C'}) CREATE (d:Loc {name:'D'}) CREATE (e:Loc {name:'E'}) CREATE (f:Loc {name:'F'}) CREATE (g:Loc {name:'G'})  CREATE (a)-[:ROAD {cost:50}]->(b) CREATE (a)-[:ROAD {cost:50}]->(c) CREATE (a)-[:ROAD {cost:100}]->(d) CREATE (b)-[:ROAD {cost:40}]->(d) CREATE (c)-[:ROAD {cost:40}]->(d) CREATE (c)-[:ROAD {cost:80}]->(e) CREATE (d)-[:ROAD {cost:30}]->(e) CREATE (d)-[:ROAD {cost:80}]->(f) CREATE (e)-[:ROAD {cost:40}]->(f);
MATCH (n1:Loc {name:'A'}), (n2:Loc {name:'F'}) CALL algo.shortestPath(n1, n2) YIELD nodeCount RETURN nodeCount;
MATCH (n1:Loc {name:'A'}), (n2:Loc {name:'G'}) CALL algo.shortestPath(n1, n2) YIELD nodeCount RETURN nodeCount;
MATCH (n1:Loc {name:'A'}), (n2:Loc {name:'E'}) CALL algo.allShortestPaths(n1, n2) YIELD nodeIds,relationshipIds,cost RETURN nodeIds,relationshipIds,cost;
MATCH (n1:Loc {name:'A'}), (n2:Loc {name:'E'}) CALL algo.allShortestPaths(n1, n2) YIELD nodeIds,relationshipIds,cost WITH nodeIds,relationshipIds,cost UNWIND relationshipIds AS rid CALL algo.native.extract(rid, {isNode:false, field:'cost'}) YIELD value RETURN value;
MATCH (n1:Loc {name:'A'}), (n2:Loc {name:'E'}) CALL algo.allShortestPaths(n1, n2, {relationshipQuery:[{label:'ROAD'}]}) YIELD nodeIds,relationshipIds WITH nodeIds,relationshipIds UNWIND relationshipIds AS rid CALL algo.native.extract(rid, {isNode:false, field:'cost'}) YIELD value RETURN nodeIds, sum(value) AS score;
MATCH (n1:Loc {name:'A'}), (n2:Loc {name:'E'}) CALL algo.allShortestPaths(n1, n2, {relationshipQuery:[{label:'ROAD'}]}) YIELD nodeIds,relationshipIds,cost WITH nodeIds,relationshipIds,cost UNWIND relationshipIds AS rid CALL algo.native.extract(rid, {isNode:false, field:'cost'}) YIELD value WITH nodeIds, sum(value) AS score CALL algo.native.extract(nodeIds, {isNode:true, field:'name'}) YIELD value RETURN value, score;
MATCH (n1:Loc {name:'A'}), (n2:Loc {name:'E'}) CALL algo.allShortestPaths(n1, n2, {relationshipQuery:'ROAD'}) YIELD nodeIds,relationshipIds,cost WITH nodeIds,relationshipIds,cost UNWIND relationshipIds AS rid CALL algo.native.extract(rid, {isNode:false, field:'cost'}) YIELD value WITH nodeIds, sum(value) AS score CALL algo.native.extract(nodeIds, {isNode:true, field:'name'}) YIELD value RETURN value, score;
