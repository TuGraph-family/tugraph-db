"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[73118],{28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>d});var l=n(96540);const t={},o=l.createContext(t);function s(e){const r=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),l.createElement(o.Provider,{value:r},e.children)}},60255:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>a});var l=n(74848),t=n(28453);const o={},s="bolt \u9ad8\u53ef\u7528\u96c6\u7fa4\u6a21\u5f0f\u5b9e\u8df5",d={id:"installation&running/bolt_cluster_practice",title:"bolt \u9ad8\u53ef\u7528\u96c6\u7fa4\u6a21\u5f0f\u5b9e\u8df5",description:"\u6b64\u6587\u6863\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 Bolt \u534f\u8bae\u8fde\u63a5\u5e76\u4f7f\u7528\u9ad8\u53ef\u7528\u96c6\u7fa4\u3002",source:"@site/versions/version-4.5.2/zh-CN/source/5.installation&running/10.bolt_cluster_practice.md",sourceDirName:"5.installation&running",slug:"/installation&running/bolt_cluster_practice",permalink:"/tugraph-db/en-US/zh/4.5.2/installation&running/bolt_cluster_practice",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"bolt \u9ad8\u53ef\u7528\u96c6\u7fa4\u6a21\u5f0f",permalink:"/tugraph-db/en-US/zh/4.5.2/installation&running/bolt_cluster"},next:{title:"\u6570\u636e\u5bfc\u5165",permalink:"/tugraph-db/en-US/zh/4.5.2/utility-tools/data-import"}},i={},a=[{value:"\u521b\u5efa\u96c6\u7fa4",id:"\u521b\u5efa\u96c6\u7fa4",level:2},{value:"\u524d\u671f\u51c6\u5907",id:"\u524d\u671f\u51c6\u5907",level:3},{value:"\u8282\u70b9\u914d\u7f6e",id:"\u8282\u70b9\u914d\u7f6e",level:3},{value:"\u542f\u52a8\u670d\u52a1",id:"\u542f\u52a8\u670d\u52a1",level:3},{value:"\u67e5\u770b\u96c6\u7fa4\u6210\u5458\u4fe1\u606f",id:"\u67e5\u770b\u96c6\u7fa4\u6210\u5458\u4fe1\u606f",level:3},{value:"\u67e5\u770b\u8282\u70b9\u7684raft\u72b6\u6001\u4fe1\u606f.",id:"\u67e5\u770b\u8282\u70b9\u7684raft\u72b6\u6001\u4fe1\u606f",level:3},{value:"\u5220\u9664/\u6dfb\u52a0\u8282\u70b9",id:"\u5220\u9664\u6dfb\u52a0\u8282\u70b9",level:2},{value:"\u5220\u9664\u8282\u70b9",id:"\u5220\u9664\u8282\u70b9",level:3},{value:"\u6dfb\u52a0\u65b0\u8282\u70b9",id:"\u6dfb\u52a0\u65b0\u8282\u70b9",level:3},{value:"\u6dfb\u52a0learner\u8282\u70b9",id:"\u6dfb\u52a0learner\u8282\u70b9",level:2},{value:"bolt\u5ba2\u6237\u7aef\u8fde\u63a5\u5b9e\u4f8b",id:"bolt\u5ba2\u6237\u7aef\u8fde\u63a5\u5b9e\u4f8b",level:2},{value:"python",id:"python",level:3}];function c(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.header,{children:(0,l.jsx)(r.h1,{id:"bolt-\u9ad8\u53ef\u7528\u96c6\u7fa4\u6a21\u5f0f\u5b9e\u8df5",children:"bolt \u9ad8\u53ef\u7528\u96c6\u7fa4\u6a21\u5f0f\u5b9e\u8df5"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"\u6b64\u6587\u6863\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 Bolt \u534f\u8bae\u8fde\u63a5\u5e76\u4f7f\u7528\u9ad8\u53ef\u7528\u96c6\u7fa4\u3002"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"\u521b\u5efa\u96c6\u7fa4",children:"\u521b\u5efa\u96c6\u7fa4"}),"\n",(0,l.jsx)(r.p,{children:"\u4ee5\u4e0b\u662f\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u4e09\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\u793a\u4f8b\u3002"}),"\n",(0,l.jsx)(r.h3,{id:"\u524d\u671f\u51c6\u5907",children:"\u524d\u671f\u51c6\u5907"}),"\n",(0,l.jsx)(r.p,{children:"\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u62c9\u53d6\u955c\u50cf\u5e76\u542f\u52a8 Docker \u5bb9\u5668\u3002"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsx)(r.li,{children:"\u62c9\u53d6\u955c\u50cf"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"docker pull tugraph/tugraph-runtime-centos7:latest\n"})}),"\n",(0,l.jsxs)(r.ol,{start:"2",children:["\n",(0,l.jsx)(r.li,{children:"\u542f\u52a8docker"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"docker run --net=host -itd -v /root/tugraph/data:/var/lib/lgraph/data  -v /root/tugraph/log:/var/log/lgraph_log \\\n--name tugraph_ha ${REPOSITORY}:${VERSION} /bin/bash\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u8282\u70b9\u914d\u7f6e",children:"\u8282\u70b9\u914d\u7f6e"}),"\n",(0,l.jsx)(r.p,{children:"\u4fee\u6539\u6bcf\u4e2a\u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u662f\u5bb9\u5668\u5185/usr/local/etc/lgraph.json\u3002"}),"\n",(0,l.jsx)(r.p,{children:"\u8282\u70b91"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-json",children:'{\n  "directory" : "/var/lib/lgraph/data",\n  "host" : "172.20.10.52",\n  "port" : 7070,\n  "bolt_port": 7687,\n  "bolt_raft_port":8000,\n  "bolt_raft_node_id":1,\n  "bolt_raft_init_peers":[\n    {"bolt_raft_node_id":1,"ip":"172.20.10.52","bolt_raft_port":8000,"bolt_port":7687},\n    {"bolt_raft_node_id":2,"ip":"172.20.10.53","bolt_raft_port":8000,"bolt_port":7687},\n    {"bolt_raft_node_id":3,"ip":"172.20.10.54","bolt_raft_port":8000,"bolt_port":7687}\n  ],\n  "verbose" : 1,\n  "log_dir" : "/var/log/lgraph_log",\n  "disable_auth" : false,\n  "ssl_auth" : false,\n  "server_key" : "/usr/local/etc/lgraph/server-key.pem",\n  "server_cert" : "/usr/local/etc/lgraph/server-cert.pem",\n  "web" : "/usr/local/share/lgraph/browser-resource"\n}\n'})}),"\n",(0,l.jsx)(r.p,{children:"\u8282\u70b92"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-json",children:'{\n  "directory" : "/var/lib/lgraph/data",\n  "host" : "172.20.10.53",\n  "port" : 7070,\n  "bolt_port": 7687,\n  "bolt_raft_port":8000,\n  "bolt_raft_node_id":2,\n  "bolt_raft_init_peers":[\n    {"bolt_raft_node_id":1,"ip":"172.20.10.52","bolt_raft_port":8000,"bolt_port":7687},\n    {"bolt_raft_node_id":2,"ip":"172.20.10.53","bolt_raft_port":8000,"bolt_port":7687},\n    {"bolt_raft_node_id":3,"ip":"172.20.10.54","bolt_raft_port":8000,"bolt_port":7687}\n  ],\n  "verbose" : 1,\n  "log_dir" : "/var/log/lgraph_log",\n  "disable_auth" : false,\n  "ssl_auth" : false,\n  "server_key" : "/usr/local/etc/lgraph/server-key.pem",\n  "server_cert" : "/usr/local/etc/lgraph/server-cert.pem",\n  "web" : "/usr/local/share/lgraph/browser-resource"\n}\n'})}),"\n",(0,l.jsx)(r.p,{children:"\u8282\u70b93"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-json",children:'{\n  "directory" : "/var/lib/lgraph/data",\n  "host" : "172.20.10.54",\n  "port" : 7070,\n  "bolt_port": 7687,\n  "bolt_raft_port":8000,\n  "bolt_raft_node_id":3,\n  "bolt_raft_init_peers":[\n    {"bolt_raft_node_id":1,"ip":"172.20.10.52","bolt_raft_port":8000,"bolt_port":7687},\n    {"bolt_raft_node_id":2,"ip":"172.20.10.53","bolt_raft_port":8000,"bolt_port":7687},\n    {"bolt_raft_node_id":3,"ip":"172.20.10.54","bolt_raft_port":8000,"bolt_port":7687}\n  ],\n  "verbose" : 1,\n  "log_dir" : "/var/log/lgraph_log",\n  "disable_auth" : false,\n  "ssl_auth" : false,\n  "server_key" : "/usr/local/etc/lgraph/server-key.pem",\n  "server_cert" : "/usr/local/etc/lgraph/server-cert.pem",\n  "web" : "/usr/local/share/lgraph/browser-resource"\n}\n'})}),"\n",(0,l.jsx)(r.p,{children:"\u914d\u7f6e\u8bf4\u660e"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"port"}),": web\u7aef\u53e3\u3002"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"bolt_port"}),": \u5bf9\u5916\u4f7f\u7528\uff0cbolt\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7aef\u53e3\u3002"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"bolt_raft_port"}),": \u96c6\u7fa4\u5185\u90e8\u4f7f\u7528\uff0craft\u96c6\u7fa4\u5185\u90e8\u4e92\u76f8\u901a\u4fe1\u65f6\u6240\u7528\u7684\u7aef\u53e3\uff0cbolt\u5ba2\u6237\u7aef\u4e0d\u8981\u8fde\u63a5\u8fd9\u4e2a\u3002"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"bolt_raft_node_id"}),": raft\u96c6\u7fa4\u8282\u70b9id\uff0c\u6574\u4e2a\u96c6\u7fa4\u6bcf\u4e2a\u8282\u70b9\u8981\u552f\u4e00\u3002"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"bolt_raft_init_peers"}),": raft\u96c6\u7fa4\u9996\u6b21\u521d\u59cb\u5316\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u91cc\u9762\u8bb0\u5f55\u4e86\u6bcf\u4e2a\u8282\u70b9\u7684",(0,l.jsx)(r.code,{children:"bolt_raft_node_id"}),", ",(0,l.jsx)(r.code,{children:"ip"}),", ",(0,l.jsx)(r.code,{children:"bolt_raft_port"}),", ",(0,l.jsx)(r.code,{children:"bolt_port"})," \u8fd9\u6837\u6bcf\u4e2a\u8282\u70b9\u90fd\u77e5\u9053\u5176\u4ed6\u8282\u70b9\u7684\u901a\u4fe1\u4fe1\u606f\uff0c\u53ef\u4ee5\u4e92\u76f8\u901a\u4fe1\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.p,{children:["raft\u96c6\u7fa4\u76844\u4e2a\u6838\u5fc3\u914d\u7f6e\u53c2\u6570\u662f",(0,l.jsx)(r.code,{children:"bolt_port"}),",",(0,l.jsx)(r.code,{children:"bolt_raft_port"}),",",(0,l.jsx)(r.code,{children:"bolt_raft_node_id"}),",",(0,l.jsx)(r.code,{children:"bolt_raft_init_peers"}),"\u3002"]}),"\n",(0,l.jsxs)(r.p,{children:["\u8bf7\u6ce8\u610f\uff0c\u901a\u8fc7RPC\u534f\u8bae\u521b\u5efa\u96c6\u7fa4\u65f6\u7684\u914d\u7f6e\u9879\uff0c\u4f8b\u5982",(0,l.jsx)(r.code,{children:"enable_ha"}),"\u3001",(0,l.jsx)(r.code,{children:"ha_node_join_group_s"}),"\u7b49\uff0c\u4e0d\u8981\u51fa\u73b0\u5728\u901a\u8fc7Bolt\u521b\u5efaHA\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u3002"]}),"\n",(0,l.jsx)(r.h3,{id:"\u542f\u52a8\u670d\u52a1",children:"\u542f\u52a8\u670d\u52a1"}),"\n",(0,l.jsx)(r.p,{children:"\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u5165 tugraph_ha \u5bb9\u5668\u5e76\u6267\u884c\u76f8\u5173\u547d\u4ee4\u4ee5\u542f\u52a8\u670d\u52a1\uff1a"}),"\n",(0,l.jsx)(r.p,{children:"1.\u8fdb\u5165\u5bb9\u5668"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"docker exec -it tugrapn_ha bash\n"})}),"\n",(0,l.jsx)(r.p,{children:"2.\u542f\u52a8\u670d\u52a1"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"lgraph_server -c /usr/local/etc/lgraph.json -d start\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u67e5\u770b\u96c6\u7fa4\u6210\u5458\u4fe1\u606f",children:"\u67e5\u770b\u96c6\u7fa4\u6210\u5458\u4fe1\u606f"}),"\n",(0,l.jsx)(r.p,{children:"\u53ef\u4ee5\u5411\u96c6\u7fa4\u4e2d\u4efb\u610f\u4e00\u4e2a\u8282\u70b9\u53d1\u9001\uff0c\u8fd4\u56de\u6210\u5458\u5217\u8868\u4ee5\u53caleader\u4fe1\u606f\u3002"}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.code,{children:"CALL db.bolt.listRaftNodes()"})}),"\n",(0,l.jsx)(r.h3,{id:"\u67e5\u770b\u8282\u70b9\u7684raft\u72b6\u6001\u4fe1\u606f",children:"\u67e5\u770b\u8282\u70b9\u7684raft\u72b6\u6001\u4fe1\u606f."}),"\n",(0,l.jsx)(r.p,{children:"\u53ef\u4ee5\u5411\u96c6\u7fa4\u4e2d\u4efb\u610f\u4e00\u4e2a\u8282\u70b9\u53d1\u9001\uff0c\u8fd4\u56de\u6bcf\u4e2a\u8282\u70b9\u81ea\u5df1\u7684raft\u72b6\u6001\u4fe1\u606f\u3002"}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.code,{children:"CALL db.bolt.getRaftStatus()"})}),"\n",(0,l.jsx)(r.h2,{id:"\u5220\u9664\u6dfb\u52a0\u8282\u70b9",children:"\u5220\u9664/\u6dfb\u52a0\u8282\u70b9"}),"\n",(0,l.jsx)(r.p,{children:"\u4e0b\u9762\u6a21\u62df\u67d0\u4e00\u4e2a\u8282\u70b9\u610f\u5916\u505c\u6b62\u670d\u52a1\uff08kill\u8be5\u8282\u70b9\u670d\u52a1\u8fdb\u7a0b\uff09\uff0c\u5c06\u505c\u6b62\u670d\u52a1\u7684\u8282\u70b9\u5220\u53bb\uff0c\u91cd\u65b0\u6dfb\u52a0\u4e00\u4e2a\u8282\u70b9\u3002"}),"\n",(0,l.jsx)(r.h3,{id:"\u5220\u9664\u8282\u70b9",children:"\u5220\u9664\u8282\u70b9"}),"\n",(0,l.jsxs)(r.p,{children:["\u5c06\u8282\u70b9id\u662f",(0,l.jsx)(r.code,{children:"3"}),"\u7684\u5b9e\u4f8b\u4ece\u96c6\u7fa4\u4e2d\u5220\u9664\uff0c\u53ea\u80fd\u5728leader\u8282\u70b9\u6267\u884c\u3002"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"CALL db.bolt.removeRaftNode(3)\n"})}),"\n",(0,l.jsxs)(r.p,{children:["\u5220\u9664\u540e\u518d\u6b21\u67e5\u770b\u96c6\u7fa4\u6210\u5458\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230id\u662f",(0,l.jsx)(r.code,{children:"3"}),"\u7684\u5b9e\u4f8b\u5df2\u7ecf\u88ab\u6e05\u9664\u3002"]}),"\n",(0,l.jsx)(r.h3,{id:"\u6dfb\u52a0\u65b0\u8282\u70b9",children:"\u6dfb\u52a0\u65b0\u8282\u70b9"}),"\n",(0,l.jsxs)(r.p,{children:["\u6dfb\u52a0\u8282\u70b9id\u662f",(0,l.jsx)(r.code,{children:"4"}),'\u7684\u5b9e\u4f8b\uff0c\u521d\u59cb\u5316\u64cd\u4f5c\u53ef\u4ee5\u53c2\u8003\u524d\u9762\u521b\u5efa\u96c6\u7fa4\u7684"\u524d\u671f\u51c6\u5907"\u7ae0\u8282\uff0c\u8fd9\u65f6\u5148\u4e0d\u8981\u542f\u52a8lgraph_server\u670d\u52a1\u3002']}),"\n",(0,l.jsxs)(r.p,{children:["\u6dfb\u52a0\u4e00\u4e2a\u65b0\u8282\u70b9\u5230\u96c6\u7fa4\uff0c\u8282\u70b9id\u662f",(0,l.jsx)(r.code,{children:"4"}),"\uff0cip\u662f",(0,l.jsx)(r.code,{children:"172.20.10.41"}),", ",(0,l.jsx)(r.code,{children:"bolt_port"}),"\u662f",(0,l.jsx)(r.code,{children:"7687"}),", ",(0,l.jsx)(r.code,{children:"bolt_raft_port"}),"\u662f",(0,l.jsx)(r.code,{children:"8000"}),"\u3002\u6dfb\u52a0\u65b0\u8282\u70b9\u53ea\u80fd\u5728leader\u8282\u70b9\u6267\u884c\u3002"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:" CALL db.bolt.addRaftNode(4, '172.20.10.41', 7687, 8000)\n"})}),"\n",(0,l.jsxs)(r.p,{children:["\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u901a\u8fc7\u6267\u884c",(0,l.jsx)(r.code,{children:"addRaftNode"}),"\u6dfb\u52a0\u65b0\u8282\u70b9\u4e4b\u540e\u9700\u8981\u624b\u52a8\u505a\u4e00\u6b21\u79bb\u7ebf\u7684\u5168\u91cf\u6570\u636e\u540c\u6b65\u624d\u80fd\u542f\u52a8\u65b0\u8282\u70b9\u7684lgraph_server\u670d\u52a1\u3002\u5b8c\u6210\u8fd9\u4e00\u8fc7\u7a0b\u540e\uff0c\u5f53\u65b0\u7684\u8282\u70b9\u670d\u52a1\u542f\u52a8\u5e76\u8fd0\u884c\u65f6\uff0c\u4efb\u4f55\u8fdb\u4e00\u6b65\u7684\u589e\u91cf\u6570\u636e\u5199\u5165\u5c06\u4f1a\u88ab\u81ea\u52a8\u540c\u6b65\u3002\u5168\u91cf\u6570\u636e\u540c\u6b65\u53ef\u4ee5\u76f4\u63a5\u66ff\u6362\u6267\u884cdocker run\u547d\u4ee4\u521b\u5efa\u5bb9\u5668\u65f6\u6302\u8f7d\u51fa\u6765\u7684tugraph\u76ee\u5f55\u3002\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a"]}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsx)(r.li,{children:"\u505c\u6b62\u65b0\u8282\u70b9\u5bb9\u5668\u3002"}),"\n",(0,l.jsx)(r.li,{children:"\u7528\u4efb\u4e00\u6b63\u5e38\u670d\u52a1\u8282\u70b9\u7684tugraph\u76ee\u5f55\uff0c\u66ff\u6362\u65b0\u8282\u70b9\u6267\u884cdocker run\u547d\u4ee4\u521b\u5efa\u5bb9\u5668\u65f6\u6302\u8f7d\u51fa\u6765\u7684tugraph\u76ee\u5f55\u3002"}),"\n",(0,l.jsx)(r.li,{children:"\u542f\u52a8\u65b0\u8282\u70b9\u5bb9\u5668\u3002"}),"\n",(0,l.jsx)(r.li,{children:"\u8fdb\u5165\u5bb9\u5668\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:' {\n"directory" : "/var/lib/lgraph/data",\n"host" : "172.20.10.41",\n"port" : 7070,\n"bolt_port": 7687,\n"bolt_raft_port":8000,\n"bolt_raft_node_id":4,\n"bolt_raft_init_peers":[\n{"bolt_raft_node_id":1,"ip":"172.20.10.52","bolt_raft_port":8000,"bolt_port":7687},\n{"bolt_raft_node_id":2,"ip":"172.20.10.53","bolt_raft_port":8000,"bolt_port":7687},\n{"bolt_raft_node_id":4,"ip":"172.20.10.41","bolt_raft_port":8000,"bolt_port":7687}\n],\n"verbose" : 1,\n"log_dir" : "/var/log/lgraph_log",\n"disable_auth" : false,\n"ssl_auth" : false,\n"server_key" : "/usr/local/etc/lgraph/server-key.pem",\n"server_cert" : "/usr/local/etc/lgraph/server-cert.pem",\n"web" : "/usr/local/share/lgraph/browser-resource"\n}\n'})}),"\n",(0,l.jsx)(r.p,{children:"5.\u542f\u52a8\u670d\u52a1"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"lgraph_server -c /usr/local/etc/lgraph.json -d start\n"})}),"\n",(0,l.jsx)(r.h2,{id:"\u6dfb\u52a0learner\u8282\u70b9",children:"\u6dfb\u52a0learner\u8282\u70b9"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"CALL db.bolt.addRaftLearnerNode(5, '172.20.10.42', 7687, 8000)\n"})}),"\n",(0,l.jsx)(r.p,{children:'\u53ea\u80fd\u5728leader\u8282\u70b9\u6267\u884c\uff0c\u5177\u4f53\u6d41\u7a0b\u53ef\u53c2\u8003\u4e0a\u8ff0"\u6dfb\u52a0\u65b0\u8282\u70b9"\u7684\u6b65\u9aa4\uff0clearner\u8282\u70b9\u4e0d\u53c2\u4e0e\u9009\u4e3e\u6295\u7968\uff0c\u53ea\u540c\u6b65\u6570\u636e\u3002'}),"\n",(0,l.jsx)(r.h2,{id:"bolt\u5ba2\u6237\u7aef\u8fde\u63a5\u5b9e\u4f8b",children:"bolt\u5ba2\u6237\u7aef\u8fde\u63a5\u5b9e\u4f8b"}),"\n",(0,l.jsx)(r.h3,{id:"python",children:"python"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"from neo4j import GraphDatabase\n\ndef custom_resolver(address):\n    if address == ('mycluster.com', 9999):\n        return [\n            ('172.20.10.52', 7687),\n            ('172.20.10.53', 7687),\n            ('172.20.10.54', 7687)\n        ]\n    else:\n        return [address]\n\n\nif __name__ == '__main__':\n    driver = GraphDatabase.driver(\n        \"neo4j://mycluster.com:9999\",\n        auth=(\"admin\", \"73@TuGraph\"),\n        resolver=custom_resolver\n    )\n    session = driver.session(database=\"default\")\n    session.run(\"CALL db.dropDB()\")\n    session.run(\"CALL db.createVertexLabel('person', 'id' , 'id', 'INT32', false, 'count', 'INT64', false)\")\n    session.run(\"create (n1:person {id:1, count:0})\")\n    session.close()\n    driver.close()\n"})}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.code,{children:"mycluster.com:9999"}),"\u662f\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5047\u7684\u57df\u540d\u5730\u5740, GraphDatabase driver\u521d\u59cb\u5316\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u4f20\u5165\u4e00\u4e2a\u5b9a\u5236\u5316\u7684resolver\u89e3\u6790\u5668",(0,l.jsx)(r.code,{children:"custom_resolver"}),", ",(0,l.jsx)(r.code,{children:"custom_resolver"}),"\u91cc\u9762\u7684\u903b\u8f91\u662f\u5f53\u57df\u540d\u5730\u5740\u662f",(0,l.jsx)(r.code,{children:"mycluster.com:9999"}),"\u7684\u65f6\u5019\uff0c\u8fd4\u56de\u4e09\u4e2a\u96c6\u7fa4\u5730\u5740\u3002"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,l.jsx)(r,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);