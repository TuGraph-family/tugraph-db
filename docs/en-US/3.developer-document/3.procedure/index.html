<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Procedure - TuGraph Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Procedure";
        var mkdocs_page_input_path = "en-US\\3.developer-document\\3.procedure.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> TuGraph Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">en-US</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Guide</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../1.guide/1.what-is-graph/">What is Graph</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../1.guide/2.what-is-GDBMS/">What is GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../1.guide/3.quick-start/">Quick Start</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Operating</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/1.introduce/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/2.Install/">Install</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/3.data-import/">Data Import</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/4.server-config/">Server Config</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/5.operation/">Operation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/7.ha-mode/">HA Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/8.manage-database/">Manage Database</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.operating/9.privilege/">Privilege</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Tools</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../2.operating/6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../2.operating/6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../2.operating/6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../2.operating/6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Developer Document</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Procedure</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#guide">Guide</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#write-stored-procedures">Write Stored Procedures</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#c">C++</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#python">Python</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#install-stored-procedures">Install Stored Procedures</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#list-stored-procedures">List Stored Procedures</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#retrieve-stored-procedures-detail">Retrieve Stored Procedures Detail</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#call-stored-procedures">Call Stored Procedures</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#uninstall-stored-procedures">Uninstall Stored Procedures</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#upgrade-stored-procedures">Upgrade Stored Procedures</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#procedure-api-document">Procedure-api Document</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Graph Analytics Engine</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../4.graph_analytics_engine/1.tutorial/">Tutorial</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../4.graph_analytics_engine/2.olap-base-api/">OLAP Base API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../4.graph_analytics_engine/3.olap-on-db-api/">OLAP on DB API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../4.graph_analytics_engine/4.olap-on-disk-api/">OLAP on Disk API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../4.graph_analytics_engine/5.algorithms/">Algorithms</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../4.graph_analytics_engine/6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Client</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../4.client/1.java-client/">Java Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../4.client/2.python-client/">Python Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../4.client/3.cpp-client/">CPP Client</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Supplement</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../5.supplement/changelog/">Changelog</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Community</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/1.contributing/">Contributing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/2.membership/">Membership</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/3.roadmap/">Roadmap</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/4.individual_cla/">Individual CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/5.corporate_cla/">Corporate CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">zh-CN</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">指南</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/1.guide/1.what-is-graph/">什么是图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/1.guide/2.what-is-GDBMS/">什么是 GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/1.guide/3.quick-start/">快速入门</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">操作</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/1.introduce/">介绍</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/2.Install/">安装</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/3.data-import/">数据导入</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/4.server-config/">服务器配置</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/5.operation/">运维</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/7.ha-mode/">高可用模式</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/8.manage-database/">管理数据库</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/9.privilege/">权限</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/10.resource-monitoring/">资源监控</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/11.integration-test/">集成测试</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">工具</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">开发者文档</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/3.developer-document/1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/3.developer-document/2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/3.developer-document/3.procedure/">Procedure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">图分析引擎</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/1.tutorial/">教程</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/2.olap-base-api/">OLAP 基本 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/3.olap-on-db-api/">OLAP 在数据库上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/4.olap-on-disk-api/">OLAP 在磁盘上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/5.algorithms/">算法</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">客户端</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/1.java-client/">Java 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/2.python-client/">Python 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/3.cpp-client/">CPP 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/4.java-ogm/">Java OGM</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">补充</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/5.supplement/changelog/">更新日志</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">社区</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/1.contributing/">参与贡献</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/2.membership/">成员资格</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/3.roadmap/">路线图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/4.individual_cla/">个人 CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/5.corporate_cla/">企业 CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">TuGraph Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>en-US &raquo;</li>
          <li>Developer Document &raquo;</li>
      <li>Procedure</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="tugraph-stored-procedure-guide">TuGraph Stored Procedure Guide</h1>
<blockquote>
<p>This document describes how to use TuGraph's stored procedures</p>
</blockquote>
<h2 id="introduction">Introduction</h2>
<p>When users want to express complex logics of queries or updates (such as those currently not supported by Cypher, or those demanding high performance), using TuGraph stored procedures would be a better choice.</p>
<p>Similar to traditional databases, TuGraph's stored procedures run on the server side, and users can reduce the number of calls to the REST interface required by the client by encapsulating the processing logic (that is, multiple operations) into one procedure, and can implement it through parallel Processing methods (such as using the relevant C++ OLAP interface and built-in algorithms based on its implementation) for further acceleration.</p>
<h2 id="guide">Guide</h2>
<p>In TuGraph, users can dynamically load, update and delete stored procedures. TuGraph supports stored procedures written in C language and Python language. The extension of the stored procedure written in C language is generally .so (under Linux/Unix system) or .dll (under Windows system). The extension of a Python stored procedure is .py. The two stored procedures are managed separately, but are used in the same way. Users can manage and call stored procedures through RESTful API or RPC. The following description takes the RESTful API as an example, and the corresponding RPC calling method is detailed in the RPC documentation.</p>
<h2 id="write-stored-procedures">Write Stored Procedures</h2>
<h3 id="c">C++</h3>
<p>The following shows the code of a simple TuGraph C++ stored procedure.
Calculate the number of outgoing and incoming edges and the sum of the number of incoming and outgoing edges for each node:</p>
<pre><code class="language-C++">// standard_result.cpp
#include &quot;lgraph/lgraph_result.h&quot;
#include &quot;iostream&quot;

using namespace lgraph_api;

extern &quot;C&quot; LGAPI bool Process(GraphDB &amp;db, const std::string &amp;request, std::string &amp;response) {
    // defination
    Result result({{&quot;node&quot;, LGraphType::NODE},
                   {&quot;edge_num_sum&quot;, LGraphType::INTEGER},
                   {&quot;edge_num&quot;, LGraphType::MAP}});

    auto txn = db.CreateReadTxn();
    for (auto vit = txn.GetVertexIterator(); vit.IsValid(); vit.Next()) {
        auto &amp;record = result.NewRecord();
        std::map&lt;std::string, FieldData&gt; edge_num_map;
        record.insert(&quot;node&quot;, vit);

        int in_num_edges = 0;
        int out_num_edges = 0;

        for (auto eit = vit.GetOutEdgeIterator(); eit.IsValid(); eit.Next()) out_num_edges += 1;
        edge_num_map[&quot;out_num_edges&quot;] = FieldData(out_num_edges);
        for (auto eit = vit.GetInEdgeIterator(); eit.IsValid(); eit.Next()) in_num_edges += 1;
        edge_num_map[&quot;in_num_edges&quot;] = FieldData(in_num_edges);

        record.insert(&quot;edge_num_sum&quot;, FieldData(in_num_edges + out_num_edges));

        record.insert(&quot;edge_num&quot;, edge_num_map);
    }

    response = result.Dump();
    return true;
}
</code></pre>
<p>The entry of a TuGraph C++ stored procedure is the <code>Process</code> function, with three parameters:</p>
<ul>
<li><code>db</code>: the TuGraph database instance</li>
<li><code>request</code>: the input data, which can be a binary byte array, or any other format such as JSON string.</li>
<li><code>response</code>: the output data, which can be a string or directly return binary data.</li>
</ul>
<p>The <code>Result</code> structure is used in the function. <code>Result</code> is the standard output format, which can effectively help you <strong>visualize</strong> your results.
You need to define your return type first, we provide:
<code>VOID</code>,
<code>INTEGER</code>,
<code>FLOAT</code>,
<code>DOUBLE</code>,
<code>BOOLEAN</code>,
<code>STRING</code>,
<code>NODE</code>,
<code>RELATIONSHIP</code>,
<code>PATH</code>,
<code>LIST</code>,
<code>MAP</code>,
<code>FIELD</code>,
<code>GRAPH_ELEMENT</code>,
<code>COLLECTION</code>,
<code>ANY</code>
fifteen types.</p>
<p>Users can use <code>Result</code> by three steps.</p>
<ol>
<li>define your return type</li>
</ol>
<pre><code class="language-C++">Result result({{&quot;node&quot;, LGraphType::NODE},
                   {&quot;edge_num_sum&quot;, LGraphType::INTEGER},
                   {&quot;edge_num&quot;, LGraphType::MAP}});
</code></pre>
<p>We define three return types in demo, <code>NODE</code>, <code>INTEGER</code>, <code>MAP</code>, and corresponding title. 2. initialize <code>Record</code> and add element.</p>
<pre><code class="language-C++">auto &amp;record = result.NewRecord();
// insert multiple times
record.insert(&quot;node&quot;, vit);
</code></pre>
<ol>
<li><code>Dump</code> your result</li>
</ol>
<pre><code class="language-C++">response = result.Dump();
</code></pre>
<p><strong>Attention</strong></p>
<ul>
<li>The return value must be a <strong>reference</strong>.</li>
<li>Assigning multiple <code>Record</code> at the same time may cause partial loss of data.</li>
</ul>
<p>The return value of <code>Process</code> is a boolean value. When it is true, it means the operation succeeds; otherwise it means there exist errors during execution (users may return error information through <code>response</code>).</p>
<p>To build the above stored procedure, you can type the following in shell:</p>
<pre><code class="language-bash">g++ -fno-gnu-unique -fPIC -g --std=c++14 -I/usr/local/include/lgraph -rdynamic -O3 -fopenmp -o age_10.so age_10.cpp /usr/local/lib64/liblgraph.so -shared
</code></pre>
<p>which should generate an <code>age_10.so</code> file.</p>
<h3 id="python">Python</h3>
<p>The following snippet does the same thing as the above C++ stored procedure, but via TuGraph Python API:</p>
<pre><code class="language-python">def Process(db, input):
    txn = db.CreateReadTxn()
    it = txn.GetVertexIterator()
    n = 0
    while it.IsValid():
        if it.GetLabel() == 'student' and it['age'] and it['age'] == 10:
            n = n + 1
        it.Next()
    return (True, str(nv))
</code></pre>
<p>The return value of TuGraph Python stored procedures is a tuple, consisting of a boolean value indicating whether the operation succeeds, and a string value containing the response data.</p>
<h2 id="install-stored-procedures">Install Stored Procedures</h2>
<p>Users may install plugins with the following Python snippet into the <code>school</code> graph (different graphs can have different stored procedures)：</p>
<pre><code class="language-python">import requests
import json
import base64

data = {'name':'age_10'}
f = open('./age_10.so','rb')
content = f.read()
data['code_base64'] = base64.b64encode(content).decode()
data['description'] = 'Calculate number of students in the age of 10'
data['read_only'] = true
data['code_type'] = 'so'
js = json.dumps(data)
r = requests.post(url='http://127.0.0.1:7071/db/school/cpp_plugin', data=js,
            headers={'Content-Type':'application/json'})
print(r.status_code)    # return 200 for normal
</code></pre>
<p>One thing to note is that <code>data['code']</code> is a base64-encoded string since the binary content in <code>age_10.so</code> may not be transported via JSON directly. In addition, only administrators can manage stored procedures. Normal users can only call or list stored procedures.</p>
<p>Once installed, stored procedures are maintained in the database, so they will be loaded automatically on TuGraph server startup.</p>
<p>Installing Python stored procedures in TuGraph only differs in the URL (i.e. <code>http://127.0.0.1:7071/db/school/python_plugin</code>)</p>
<h2 id="list-stored-procedures">List Stored Procedures</h2>
<p>The following snippet shows how to list all C++ stored procedures installed in the <code>school</code> graph：</p>
<pre><code class="language-python">&gt;&gt;&gt; r = requests.get('http://127.0.0.1:7071/db/school/cpp_plugin')
&gt;&gt;&gt; r.status_code
200
&gt;&gt;&gt; r.text
'{&quot;plugins&quot;:[{&quot;description&quot;:&quot;Calculate number of students in the age of 10&quot;, &quot;name&quot;:&quot;age_10&quot;, &quot;read_only&quot;:true}]}'
</code></pre>
<h2 id="retrieve-stored-procedures-detail">Retrieve Stored Procedures Detail</h2>
<p>The following snippet shows how to one procedure detail, including code:</p>
<pre><code class="language-python">&gt;&gt;&gt; r = requests.get('http://127.0.0.1:7071/db/school/cpp_plugin/age_10')
&gt;&gt;&gt; r.status_code
200
&gt;&gt;&gt; r.text
'{&quot;description&quot;:&quot;Calculate number of students in the age of 10&quot;, &quot;name&quot;:&quot;age_10&quot;, &quot;read_only&quot;:true, &quot;code_base64&quot;:&lt;CODE&gt;, &quot;code_type&quot;:&quot;so&quot;}'
</code></pre>
<h2 id="call-stored-procedures">Call Stored Procedures</h2>
<p>The following snippet shows how to call the <code>age_10</code> C++ stored procedure in the <code>school</code> graph:</p>
<pre><code class="language-python">&gt;&gt;&gt; r = requests.post(url='http://127.0.0.1:7071/db/school/cpp_plugin/age_10', data='',
                headers={'Content-Type':'application/json'})
&gt;&gt;&gt; r.status_code
200
&gt;&gt;&gt; r.text
9
</code></pre>
<h2 id="uninstall-stored-procedures">Uninstall Stored Procedures</h2>
<p>You can uninstall the <code>age_10</code> C++ stored procedure with the following snippet:</p>
<pre><code class="language-python">&gt;&gt;&gt; r = requests.delete(url='http://127.0.0.1:7071/db/school/cpp_plugin/age_10')
&gt;&gt;&gt; r.status_code
200
</code></pre>
<p>Note that only administrators can uninstall stored procedures.</p>
<h2 id="upgrade-stored-procedures">Upgrade Stored Procedures</h2>
<p>You can upgrade a stored procedure with the following two steps:</p>
<ol>
<li>Uninstall the existing one.</li>
<li>Install the new on.</li>
</ol>
<p>TuGraph carefully manages the concurrency of stored procedure operations. Upgrading stored procedures will not affect concurrent runs of existing ones.</p>
<h2 id="procedure-api-document">Procedure-api Document</h2>
<p>TuGraph-Python-Procedure-API <a href="https://tugraph-web-static.oss-cn-beijing.aliyuncs.com/%E6%96%87%E6%A1%A3/procedure-api/3.3.2/TuGraph-Python-Procedure-API.tar.gz">[document download]</a></p>
<p>TuGraph-CPP-Procedure-API <a href="https://tugraph-web-static.oss-cn-beijing.aliyuncs.com/%E6%96%87%E6%A1%A3/procedure-api/3.3.2/TuGraph-CPP-Procedure-API.tar.gz">[document download]</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../2.cypher/" class="btn btn-neutral float-left" title="Cypher"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../4.graph_analytics_engine/1.tutorial/" class="btn btn-neutral float-right" title="Tutorial">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../2.cypher/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../4.graph_analytics_engine/1.tutorial/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
