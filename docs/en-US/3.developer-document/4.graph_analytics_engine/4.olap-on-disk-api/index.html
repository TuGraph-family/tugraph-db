<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>OLAP on Disk API - TuGraph Documentation</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "OLAP on Disk API";
        var mkdocs_page_input_path = "en-US\\3.developer-document\\4.graph_analytics_engine\\4.olap-on-disk-api.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../.." class="icon icon-home"> TuGraph Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">en-US</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Guide</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../1.guide/1.what-is-graph/">What is Graph</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../1.guide/2.what-is-GDBMS/">What is GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../1.guide/3.quick-start/">Quick Start</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Operating</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/1.introduce/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/2.Install/">Install</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/3.data-import/">Data Import</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/4.server-config/">Server Config</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/5.operation/">Operation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/7.ha-mode/">HA Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/8.manage-database/">Manage Database</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/9.privilege/">Privilege</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Tools</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Developer Document</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../../1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../3.procedure/">Procedure</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Graph Analytics Engine</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../1.tutorial/">Tutorial</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../2.olap-base-api/">OLAP Base API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../3.olap-on-db-api/">OLAP on DB API</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="./">OLAP on Disk API</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#table-of-contents">Table of contents</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../5.algorithms/">Algorithms</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Client</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../4.client/1.java-client/">Java Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../4.client/2.python-client/">Python Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../4.client/3.cpp-client/">CPP Client</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Supplement</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../5.supplement/changelog/">Changelog</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Community</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/1.contributing/">Contributing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/2.membership/">Membership</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/3.roadmap/">Roadmap</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/4.individual_cla/">Individual CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/5.corporate_cla/">Corporate CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">zh-CN</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">指南</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/1.guide/1.what-is-graph/">什么是图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/1.guide/2.what-is-GDBMS/">什么是 GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/1.guide/3.quick-start/">快速入门</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">操作</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/1.introduce/">介绍</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/2.Install/">安装</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/3.data-import/">数据导入</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/4.server-config/">服务器配置</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/5.operation/">运维</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/7.ha-mode/">高可用模式</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/8.manage-database/">管理数据库</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/9.privilege/">权限</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/10.resource-monitoring/">资源监控</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/11.integration-test/">集成测试</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">工具</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">开发者文档</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/3.developer-document/1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/3.developer-document/2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/3.developer-document/3.procedure/">Procedure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">图分析引擎</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/1.tutorial/">教程</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/2.olap-base-api/">OLAP 基本 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/3.olap-on-db-api/">OLAP 在数据库上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/4.olap-on-disk-api/">OLAP 在磁盘上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/5.algorithms/">算法</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">客户端</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/1.java-client/">Java 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/2.python-client/">Python 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/3.cpp-client/">CPP 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/4.java-ogm/">Java OGM</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">补充</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/5.supplement/changelog/">更新日志</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">社区</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/1.contributing/">参与贡献</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/2.membership/">成员资格</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/3.roadmap/">路线图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/4.individual_cla/">个人 CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/5.corporate_cla/">企业 CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">TuGraph Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>en-US &raquo;</li>
          <li>Developer Document &raquo;</li>
          <li>Graph Analytics Engine &raquo;</li>
      <li>OLAP on Disk API</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="olapondisk-api">OlapOnDisk API</h1>
<blockquote>
<p>This document mainly introduces the usage instructions of OlapOnDisk API in detail</p>
</blockquote>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#1-Introduction">1. Introduction</a></li>
<li><a href="#2-Algorithm Example">2. Algorithm Example</a><ul>
<li>[2.1 header files] (#21-header files)</li>
<li><a href="#22-Configuration class MyConfig">2.2 Configuration class MyConfig</a></li>
<li><a href="#23-Main function">2.3 Main function</a></li>
<li>[2.4 bfs algorithm flow] (#24-bfs algorithm flow)</li>
</ul>
</li>
<li><a href="#3-Function description of other commonly used functions">3. Function description of other commonly used functions</a><ul>
<li>[3.1 Image Loading] (#31-Image Loading)</li>
<li>[3.2 Image writing] (#32-Image writing)</li>
<li><a href="#33-Graph Analysis Function">3.3 Graph Analysis Function</a></li>
</ul>
</li>
</ul>
<h3 id="1-introduction">1. Introduction</h3>
<p>The Standalone mode of TuGraph can be used to load graph data files, where the sources of graph data files can include text files, BINARY_FILE binary files, and ODPS sources. In this mode, TuGraph can quickly load multiple data sources into a graph, and then run iterative algorithms such as BFS, WCC, SSSP, etc. on the graph, and output the final result to the terminal.</p>
<p>In TuGraph, the export and calculation process can be accelerated through parallel processing in memory, so as to achieve near real-time processing and analysis. Compared with traditional methods, it avoids the overhead of data export and storage, and can use compact Graph data structures achieve desirable performance for computation.</p>
<p>TuGraph has built-in a large number of common graph analysis algorithms and rich auxiliary interfaces, so users hardly need to implement the specific graph calculation process by themselves. They only need to include the header file (.h) of the corresponding algorithm library when implementing their own stored procedures. To your own program, and link your own dynamic library files in the compilation phase.</p>
<p>This document mainly introduces the common interfaces of Standalone, and the auxiliary functions used are mainly contained in the OlapOnDB class. At the same time, in order to help users understand and facilitate, the BFS algorithm is illustrated with examples.</p>
<h3 id="2-algorithm-example">2. Algorithm example</h3>
<p>Here, the BFS algorithm is explained in blocks, which are roughly divided into the main function <code>main</code>, the BFS algorithm process <code>BFSCore</code> function and the configuration class MyConfig.</p>
<h4 id="21-head-file">2.1 Head file</h4>
<pre><code class="language-C++">#include &quot;olap/olap_on_disk.h&quot;   
#include &quot;tools/json.hpp&quot;      //Header files to include when using TuGraph
#include &quot;./algo.h&quot;   //A header file containing various algorithmic logic functions
</code></pre>
<p>When using TuGraph to realize the calculation application of graph data files, generally, the StandaloneGraph class object graph is first created, the graph file data is loaded into the graph, and then the graph calculation process is realized by calling the graph logic function, and finally the result of the graph calculation is printed out.</p>
<h4 id="22-configuration-class-myconfig">2.2 Configuration class MyConfig</h4>
<p>The MyConfig configuration class function is used to provide the configuration information required for the algorithm logic calculation, inherited from ConfigBase<EdgeData>, where EdgeDate can choose Empty (unweighted graph), int (the weight of the weighted graph is an integer) or double (the weight of the weighted graph is double) type.</p>
<p>The MyConfig configuration class generally depends on the algorithm, and additional configuration information is required as follows:</p>
<ol>
<li>Parameters required by the algorithm</li>
<li>Algorithm name</li>
<li>Configure the Print function in the class
Other common members inherit from ConfigBase, please refer to src/olap/olap_config.h for reference.</li>
</ol>
<pre><code class="language-C++">class MyConfig : public ConfigBase&lt;Empty&gt; {
 public:

    // The parameters required by the algorithm are initialized
    size_t root = 0;
    std::string name = std::string(&quot;bfs&quot;);
    void AddParameter(fma_common::Configuration &amp; config) {
        ConfigBase&lt;Empty&gt;::AddParameter(config);
        config.Add(root, &quot;root&quot;, true)
                .Comment(&quot;the root of bfs&quot;);
    }
    void Print() {
        ConfigBase&lt;Empty&gt;::Print();
        std::cout &lt;&lt; &quot;  name: &quot; &lt;&lt; name &lt;&lt; std::endl;
        if (root != size_t(-1)) {
            std::cout &lt;&lt; &quot;  root: &quot; &lt;&lt; root &lt;&lt; std::endl;
        } else {
            std::cout &lt;&lt; &quot;  root: UNSET&quot; &lt;&lt; std::endl;
        }
    }
    // The configuration file accepts command line parameters. This use case will sequentially read the parameters when calling the algorithm from the command line. The value specified by the user is preferred. If the user does not specify it, the default parameter is selected.
    MyConfig(int &amp;argc, char** &amp;argv): ConfigBase&lt;Empty&gt;(argc, argv) {
        fma_common::Configuration config;
        AddParameter(config);
        config.ExitAfterHelp(true);
        config.ParseAndFinalize(argc, argv);
        Print();
    }
};
</code></pre>
<h4 id="23-main-function">2.3 main function</h4>
<pre><code class="language-C++">int main(int argc, char** argv) {
    double start_time;
    // Statistical memory consumption class MemUsage instantiation
    MemUsage memUsage;
    memUsage.startMemRecord();

    // prepare
    start_time = get_time();
    // Configuration class MyConfig instantiation
    MyConfig config(argc, argv);
    size_t root_vid = config.root;
    // OlapOnDisk class instantiation
    OlapOnDisk&lt;Empty&gt; graph;
    graph.Load(config, DUAL_DIRECTION);
    memUsage.print();
    memUsage.reset();
    // Statistical graph loading time consumption
    auto prepare_cost = get_time() - start_time;
    printf(&quot;prepare_cost = %.2lf(s)\n&quot;, prepare_cost);

    // core
    start_time = get_time();
    // Create an array to count whether a node has been traversed
    auto parent = graph.AllocVertexArray&lt;size_t&gt;();
    // Breadth-first search algorithm, returns the number of nodes connected to the root_vid root node in the graph
    size_t count = BFSCore(graph, root_vid, parent);
    memUsage.print();
    memUsage.reset();
    auto core_cost = get_time() - start_time;
    printf(&quot;core_cost = %.2lf(s)\n&quot;, core_cost);

    // output
    start_time = get_time();
    // Print relevant information to the terminal
    printf(&quot;found_vertices = %ld\n&quot;, count);
    auto output_cost = get_time() - start_time;
    printf(&quot;output_cost = %.2lf(s)\n&quot;, output_cost);

    printf(&quot;total_cost = %.2lf(s)\n&quot;, prepare_cost + core_cost + output_cost);
    printf(&quot;DONE.&quot;);

    return 0;
}
</code></pre>
<h4 id="24-bfs-algorithm-process">2.4 bfs algorithm process</h4>
<p>The main process of <code>bfs</code> has two input parameters, the snapshot class (subgraph) and the number of iterations. The overall process can be divided into the following steps:</p>
<ol>
<li>Relevant definitions and initialization of data structures</li>
<li>Use the batch function to perform cyclic calculations on each node, find all nodes adjacent to the current node in each round, and exchange them when the round ends.</li>
<li>Until all nodes are found, return the number of nodes discovered_vertices.</li>
</ol>
<pre><code class="language-C++">size_t BFSCore(Graph&lt;Empty&gt;&amp; graph, size_t root_vid, ParallelVector&lt;size_t&gt;&amp; parent){

  size_t root = root_vid;
  auto active_in = graph.AllocVertexSubset();   //Allocate an array, active_in is used to store the nodes found in the previous cycle stage
  active_in.Add(root);            //Add the root node to the array
  auto active_out = graph.AllocVertexSubset();  //Allocate the array active_out to store the nodes found in the current cycle stage
  parent.Fill((size_t)-1);               //Assign a value of -1 to the node in the parent array, -1 means not found
  parent[root] = root;
  size_t num_activations = 1;       //Indicates the number of nodes found in the current loop phase
  size_t discovered_vertices = 0;    //Indicates the total number of nodes found in the current cycle phase

  for (int ii = 0; num_activations != 0; ii++) {       //num_activations indicates the number of nodes found in the current loop phase
      printf(&quot;activates(%d) &lt;= %lu\n&quot;, ii, num_activations);
      discovered_vertices += num_activations;         //discovered_vertices indicates the total number of nodes found in the current cycle phase
      active_out.Clear();
      num_activations = graph.ProcessVertexActive&lt;size_t&gt;(
          [&amp;](size_t vi) {
              size_t num_activations = 0;
              for (auto&amp; edge : graph.OutEdges(vi)) {   //Each cycle starts from the root node, finds adjacent adjacent nodes, changes its parent value, and operates num_activations+1
                  size_t dst = edge.neighbour;
                  if (parent[dst] == (size_t)-1) {
                      auto lock = graph.GuardVertexLock(dst);
                      if (parent[dst] == (size_t)-1) {
                          parent[dst] = vi;
                          num_activations += 1;
                          active_out.Add(dst);       //Store the nodes found in the current loop phase
                      }
                  }
              }
              return num_activations;
          },
          active_in);
      active_in.Swap(active_out);
  }
  // return all nodes
  return discovered_vertices;
}
</code></pre>
<h3 id="3-description-of-other-commonly-used-functions">3. Description of other commonly used functions</h3>
<h4 id="31-graph-load">3.1 Graph load</h4>
<p>TuGraph-StandaloneThe loading sources of graph data files are mainly divided into three categories: text files, binary files, and ODPS. The binary file is a file in which the binary representation of the edge data is arranged in order, which can save a lot of storage space. Its loading function is divided into three types, namely:
- <code>void Load(ConfigBase&lt;EdgeData&gt; config,EdgeDirectionPolicy edge_direction_policy = DUAL_DIRECTION)</code>：The loading method of the graph data file contains two parameters, and their meanings represent respectively
  - <code>config</code>：Configuration parameters to load. This parameter saves the general information of the graph (such as data source, algorithm name, data input and output paths, number of vertices, etc.) and different information parameters configured according to different data sources and different algorithms.
  - <code>edge_direction_policy</code>：Specifies whether the graph is directed or undirected, including three modes: DUAL_DIRECTION, MAKE_SYMMETRIC, and INPUT_SYMMETRIC. Among them, DUAL_DIRECTION is the default graph loading method.
  DUAL_DIRECTION : The input file is an asymmetric graph and the loaded graph is an asymmetric graph.
  MAKE_SYMMETRIC : The input file is an asymmetric graph and the loaded graph is a symmetric graph.
  INPUT_SYMMETRIC : The input file is a symmetric graph and the loaded graph is a symmetric graph.
  For details, see <code>enum EdgeDirectionPolicy</code> in the olap_config.h file under the lgraph folder.</p>
<ul>
<li><code>void LoadVertexArrayTxt&lt;V&gt;(V * array, std::string path, std::function&lt;size_t(const char *, const char *, VertexUnit&lt;V&gt; &amp;)&gt; parse_line)</code>：Load the vertices in the file into an array in the order of their ids. The meanings of each parameter are:</li>
<li><code>array</code>：array of data to be read</li>
<li><code>path</code>：The path to read the file, each line in the file represents a pair of vertex</li>
<li><code>parse_line</code>：A user-defined function that tells the system how to parse a line of text data into a vertex pair.</li>
</ul>
<h4 id="32-graph-write">3.2 Graph write</h4>
<ul>
<li><code>void Write(ConfigBase&lt;EdgeData&gt; &amp; config, ParallelVector&lt;VertexData&gt;&amp; array, size_t array_size, std::string name, std::function&lt;bool(VertexData &amp;)&gt; filter_output = filter_output_default&lt;VertexData&amp;&gt;)</code>：Write the data in the array back to the file, and the meanings of each parameter are:</li>
<li><code>config</code>：Configuration parameters to load. This parameter saves the general information of the graph (such as data source, algorithm name, data input and output paths, number of vertices, etc.) and different information parameters configured according to different data sources and different algorithms.</li>
<li><code>array</code>：array of data to be written</li>
<li><code>array_size</code>：The length of the number of data to be written</li>
<li><code>name</code>：algorithm name</li>
<li><code>filter_output</code>：Write data rule function, the data to be written needs to meet the requirements of this function.</li>
</ul>
<h4 id="33-graph-parse-function">3.3 graph parse function</h4>
<ul>
<li>
<p><code>std::tuple&lt;size_t, bool&gt; parse_line_unweighted(const char *p, const char *end, EdgeUnit&lt;EdgeData&gt; &amp;e)</code>：Parse the graph data file, and load the graph as an unweighted graph.</p>
</li>
<li>
<p><code>std::tuple&lt;size_t, bool&gt; parse_line_weighted(const char* p, const char* end, EdgeUnit&lt;EdgeData&gt;&amp; e)</code>：Parse the graph data file, load the graph as a weighted graph, and specify the weight data type by modifying <EdgeData>.</p>
</li>
</ul>
<p>This function can be specified through the constructor parse_line when the MyConfig class is defined.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../3.olap-on-db-api/" class="btn btn-neutral float-left" title="OLAP on DB API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../5.algorithms/" class="btn btn-neutral float-right" title="Algorithms">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../3.olap-on-db-api/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../5.algorithms/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/theme_extra.js" defer></script>
    <script src="../../../../js/theme.js" defer></script>
      <script src="../../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
