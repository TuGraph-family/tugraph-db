<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>OLAP Base API - TuGraph Documentation</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "OLAP Base API";
        var mkdocs_page_input_path = "en-US\\3.developer-document\\4.graph_analytics_engine\\2.olap-base-api.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../.." class="icon icon-home"> TuGraph Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">en-US</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Guide</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../1.guide/1.what-is-graph/">What is Graph</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../1.guide/2.what-is-GDBMS/">What is GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../1.guide/3.quick-start/">Quick Start</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Operating</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/1.introduce/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/2.Install/">Install</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/3.data-import/">Data Import</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/4.server-config/">Server Config</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/5.operation/">Operation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/7.ha-mode/">HA Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/8.manage-database/">Manage Database</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../2.operating/9.privilege/">Privilege</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Tools</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../2.operating/6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Developer Document</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../../1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../3.procedure/">Procedure</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Graph Analytics Engine</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../1.tutorial/">Tutorial</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="./">OLAP Base API</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#1-the-overview">1. The overview</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-configuration-requirements">2. Configuration requirements</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3-atomic-operations">3. Atomic operations</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#4-vertex-class-parallelbitset">4. Vertex Class ParallelBitset</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#5-vertex-array-class-parallelvector">5. Vertex Array Class ParallelVector</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#6-customize-data-structures">6. Customize data structures</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#7-graph-class-olapbase">7. Graph class OlapBase</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../3.olap-on-db-api/">OLAP on DB API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../4.olap-on-disk-api/">OLAP on Disk API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../5.algorithms/">Algorithms</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Client</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../4.client/1.java-client/">Java Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../4.client/2.python-client/">Python Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../4.client/3.cpp-client/">CPP Client</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Supplement</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../5.supplement/changelog/">Changelog</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Community</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/1.contributing/">Contributing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/2.membership/">Membership</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/3.roadmap/">Roadmap</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/4.individual_cla/">Individual CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../6.community/5.corporate_cla/">Corporate CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">zh-CN</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">指南</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/1.guide/1.what-is-graph/">什么是图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/1.guide/2.what-is-GDBMS/">什么是 GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/1.guide/3.quick-start/">快速入门</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">操作</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/1.introduce/">介绍</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/2.Install/">安装</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/3.data-import/">数据导入</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/4.server-config/">服务器配置</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/5.operation/">运维</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/7.ha-mode/">高可用模式</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/8.manage-database/">管理数据库</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/9.privilege/">权限</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/10.resource-monitoring/">资源监控</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/2.operating/11.integration-test/">集成测试</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">工具</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/2.operating/6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">开发者文档</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/3.developer-document/1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/3.developer-document/2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/3.developer-document/3.procedure/">Procedure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">图分析引擎</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/1.tutorial/">教程</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/2.olap-base-api/">OLAP 基本 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/3.olap-on-db-api/">OLAP 在数据库上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/4.olap-on-disk-api/">OLAP 在磁盘上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/5.algorithms/">算法</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../../zh-CN/3.developer-document/4.graph_analytics_engine/6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">客户端</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/1.java-client/">Java 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/2.python-client/">Python 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/3.cpp-client/">CPP 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/4.client/4.java-ogm/">Java OGM</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">补充</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/5.supplement/changelog/">更新日志</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">社区</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/1.contributing/">参与贡献</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/2.membership/">成员资格</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/3.roadmap/">路线图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/4.individual_cla/">个人 CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../../zh-CN/6.community/5.corporate_cla/">企业 CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">TuGraph Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>en-US &raquo;</li>
          <li>Developer Document &raquo;</li>
          <li>Graph Analytics Engine &raquo;</li>
      <li>OLAP Base API</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="olapbase-api">OlapBase API</h1>
<blockquote>
<p>This document will introduce how to use the OlapBase API</p>
</blockquote>
<h2 id="1-the-overview">1. The overview</h2>
<p>This manual will introduce the configuration of the TuGraph graph computing system. Combined with the code, several important files and interfaces in TuGraph are introduced.</p>
<h2 id="2-configuration-requirements">2. Configuration requirements</h2>
<p>To develop and compile applications using the TuGraph graph computing system, the configuration required:</p>
<ul>
<li>
<p>linux operating system, currently running successfully on Ubuntu16.04.2 and Centos7 systems.</p>
</li>
<li>
<p>Compiler that supports C++ 14, requires GCC version 5.4.1 or later.</p>
</li>
</ul>
<h2 id="3-atomic-operations">3. Atomic operations</h2>
<p>TuGraph uses multi-threading technology for batch operations, in which case memory access conflicts may occur. In order to ensure the correctness of modification operations in parallel computing, TuGraph implements atomic operations. The code section can be found in the lgraph_atomic.cpp file under the lgraph folder.</p>
<p>TuGraph also customizes 4 commonly used atomic operations. When we need to modify the data of vertices in multithreaded mode, we should use atomic operations to ensure the correctness of the modification operation in parallel environment. In addition to these four atomic operations, users can also use "cas" to build their own atomic operation functions.</p>
<ul>
<li><code>bool cas(T \* ptr, T oldv, T newv)</code> : If the value pointed to by ptr is equal to oldv, the value pointed to by ptr is assigned to newv and returns true. Otherwise, false is returned</li>
<li><code>bool write_min(T \*a, T b)</code> : If b is smaller than the value pointed to by a, then assign the value pointed to by a to b and return true, otherwise return false.</li>
<li><code>bool write_max(T \*a, T b)</code> : If b is larger than the value pointed to by a, then assign the value pointed to by a to b and return true, otherwise return false.</li>
<li><code>void write_add(T \*a, T b)</code> : adds the value of b to the value pointed to by a.</li>
<li><code>void write_sub(T \*a, T b)</code> : subtract the value of b from the value pointed to by a.</li>
</ul>
<h2 id="4-vertex-class-parallelbitset">4. Vertex Class ParallelBitset</h2>
<p>When using TuGraph for batch operations, you need to use a vertex set to represent the vertices you want to process. ParallelBitset implements a vertex collection class that represents vertices in bits and thus saves a significant amount of memory. The corresponding code can be found in the olap_base.h file in the lgraph folder.</p>
<h3 id="41-parallelbitset-class">4.1 ParallelBitset Class</h3>
<ul>
<li><code>size_t Size()</code>：Indicates the number of vertices in the Bitmap.</li>
<li><code>ParallelBitset(size_t size)</code>：Initialize size and data, the length of data is (size &gt;&gt; 6)+1.</li>
<li><code>void Clear()</code>：clears the collection.</li>
<li><code>void Fill()</code>：add all vertices to the set.</li>
<li><code>bool Has(size_t i)</code>：check if vertex i is in the set.</li>
<li><code>bool Add(size_t i)</code>：add vertex i to the set.</li>
<li><code>void Swap(ParallelBitset &amp;other)</code>：exchange elements with another set of ParallelBitset.</li>
</ul>
<h2 id="5-vertex-array-class-parallelvector">5. Vertex Array Class ParallelVector</h2>
<p>When using TuGraph for batch operations, you need to use an array of vertices to represent the result of processing vertices. ParallelVector implements the vertex array class. The corresponding code can be found in the olap_base.h file in the lgraph folder.</p>
<h3 id="51-parallelvector-class">5.1 ParallelVector Class</h3>
<ul>
<li><code>ParallelVector(size_t capacity)</code> Builds ParallelVector. capacity is the initial size of the vertex array</li>
<li><code>T&amp; operator[](size_t i)</code> : data with subscript i</li>
<li><code>T \*begin()</code> : ParallelVector the starting pointer</li>
<li><code>T \*end()</code> : ParallelVector the end pointer to Parallelvector. begin and end are similar to the begin and end Pointers of a vector. You can use these Pointers to access an array sequentially</li>
<li><code>T&amp;Back ()</code> : ParallelVector the last data</li>
<li><code>T \*Data()</code> : represents the data in the array itself</li>
<li>`void Destroy()' : empty the ParallelVector array and delete the array</li>
<li><code>size_t Size()</code> : indicates the number of data in ParallelVector</li>
<li><code>void Resize(size_t size)</code> : Change ParallelVector to size, which must be greater than or equal to the size before the change</li>
<li><code>void Clear()</code> : empty the data in ParallelVector</li>
<li><code>void ReAlloc(size_t capacity)</code> : ParallelVector is allocated with new capacity. If data exists in the array, it is migrated to the new memory</li>
<li><code>void Fill(T elem)</code> : Assign elem to all data on ParallelVector</li>
<li><code>void Append(const T&amp;elem, bool atomic = true)</code> : Add a piece of data at the end of ParallelVector</li>
<li><code>void Swap(ParallelVector&lt;t&gt; &amp;other)</code> : to exchange data with other parallelvectors</t></li>
<li><code>ParallelVector&lt;t&gt; Copy()</code> : copies the current ParallelVector data into the Copy array</t></li>
</ul>
<h2 id="6-customize-data-structures">6. Customize data structures</h2>
<h3 id="61-basic-data-types">6.1 Basic data types</h3>
<p>We customize the data structure representation of points and edges to save memory space while covering all vertices:</p>
<ul>
<li>'Empty' : indicates a special data type with empty content.</li>
</ul>
<h3 id="62-combining-data-structures">6.2 Combining data structures</h3>
<p>In order to facilitate calculation, we define several data structures of point and edge data according to different calculation scenarios, which are as follows:</p>
<ul>
<li><code>EdgeUnit&lt;edgedata&gt;</code> : represents an edge of weight type EdgeData, used to parse the input file, and contains three member variables:</edgedata></li>
<li><code>size_t src</code> : the starting vertex of an edge</li>
<li><code>size_t dst</code> : the end of an edge</li>
<li><code>EdgeData edge_data</code> : edge weight</li>
<li><code>AdjUnit&lt;edgedata&gt;</code> : represents an edge of weight type EdgeData, used during batch computation, and contains two member variables:</edgedata></li>
<li><code>size_t neighbour</code> : indicates the neighbor vertex of an edge</li>
<li><code>EdgeData edge_data</code> : edge weight</li>
<li><code>AdjList&lt;edgedata&gt;</code> : Adjacency list of vertices with weights of type EdgeData, often used to represent the set of incoming and outgoing edges of vertices and containing two member variables:</edgedata></li>
<li><code>AdjUnit&lt;t&gt; \* begin</code> : indicates the start pointer of the list</t></li>
<li><code>AdjUnit&lt;t&gt; \* end</code> : The end pointer of the list.</t> begin and end are similar to the begin and end Pointers of a vector. You can use these Pointers to loop through the adjacency list.</li>
</ul>
<h2 id="7-graph-class-olapbase">7. Graph class OlapBase</h2>
<p>Graph class OlapBase is the main class for TuGraph to load graphs and calculate graphs. OlapBase is commonly used to represent graphs with weights of type EdgeData. See olap_base.hpp under lgraph folder for the code. This chapter covers the types and API interfaces commonly used in Graph classes. The classes used by the Procedure, Embed, and Standalone functions described above are all subclasses of this class.</p>
<h3 id="71-basic-information">7.1 Basic Information</h3>
<ul>
<li>
<p><code>size_t NumVertices()</code> : obtains the number of vertices</p>
</li>
<li>
<p><code>size_t NumEdges()</code> : Gets the number of edges</p>
</li>
<li>
<p><code>size_t OutDegree(size_t vid)</code> : indicates the outdegree of the vid of the vertex</p>
</li>
<li>
<p><code>size_t InDegree(size_t vid)</code> : indicates the input degree of vertex vid</p>
</li>
</ul>
<h3 id="72-node-sets-and-edge-sets-and-their-related-operations">7.2 node sets and edge sets and their related operations</h3>
<ul>
<li>
<p><code>ParallelVector AllocVertexArray()</code> : Allocates an array of type VertexData with size as the number of vertices</p>
</li>
<li>
<p><code>void fill_vertex_array(V \* array, V value)</code> : assigns values to all elements in the array</p>
</li>
<li>
<p><code>ParallelBitset AllocVertexSubset()</code> : Assigns a subset of ParallelBitsets to denote whether the state of all vertices is activated</p>
</li>
<li>
<p><code>AdjList OutEdges(size_t vid)'</code>: gets the set of all outgoing edges of vertex v</p>
</li>
<li>
<p><code>AdjList InEdges(size_t vid)</code> : Obtains the set of all incoming edges of vertex v</p>
</li>
<li>
<p><code>void Transpose()</code> : transpose of a directed graph</p>
</li>
<li>
<p><code>LoadFromArray(char \* edge_array, VertexId input_vertices, EdgeId input_edges, EdgeDirectionPolicy (edge_direction_policy)</code>: Loads the graph data from the array, contains four parameters, the meaning of which are respectively:</p>
</li>
</ul>
<p><code>edge_array</code> : reads the data from the array into the graph. Normally, the array contains multiple edges.</p>
<p><code>input_vertices</code>: specifies the number of vertices read into the graph by the array.</p>
<p><code>input_edges</code> : specifies the number of edges that the array reads into the image.</p>
<p><code>edge_direction_policy</code> : indicates that the graph is directed or undirected. The graph can be divided into three modes: DUAL_DIRECTION, MAKE_SYMMETRIC, and INPUT_SYMMETRIC. For details, see 'enum EdgeDirectionPolicy' in the config.h file in the core folder.</p>
<h3 id="73-locking-mechanism">7.3 Locking mechanism</h3>
<p>TuGraph implements a pair of locks to control the program's access to vertex data. Respectively is:</p>
<ul>
<li><code>void AcquireVertexLock(size_t vid)</code> : locks a vertex vid and prohibits other threads from accessing the vertex data corresponding to this lock</li>
<li><code>void ReleaseVertexLock(size_t vid)</code> : unlocks the vertex vid and all threads can access the vertex data corresponding to the lock</li>
<li><code>VertexLockGuard GuardVertexLock(size_t vid)</code> : When the vid operation is performed, the vertex vid is locked, and the lock is automatically released upon exiting the scope</li>
</ul>
<h3 id="74-batch-processing-operations">7.4 Batch Processing Operations</h3>
<p>TuGraph provides two batch operations to do a point-centered batch process in parallel. Respectively is:</p>
<pre><code class="language-c++">/*
    Function Name:ReducedSum ProcessVertexInRange(std::function&lt;ReducedSum(size_t)&gt; work, size_t lower, size_t upper,
                ReducedSum zero = 0,std::function&lt;ReducedSum(ReducedSum, ReducedSum)&gt; reduce =reduce_plus&lt;ReducedSum&gt;)

    The work function executes the work function on nodes whose numbers are between lower and upper in the Graph. The fourth parameter indicates the accumulated base, which defaults to 0.The fifth parameter indicates that the iteration reduce function operation is performed on the return value of each node processed by work, and the default operation is the accumulation operation.
For details, please refer to include/lgraph/olap_base.h

    Example: Count the number of vertices in the parent array that have outgoing edges
*/

auto vertex_num = graph.ProcessVertexInRange&lt;size_t&gt;(
    [&amp;](size_t i) {
        if (graph.OutDegree(parent[i]) &gt; 0) {
            return 1;
        }
    },
    0, parent.Size()
);
printf(&quot;the number is %lu\n&quot;,vertex_num);
</code></pre>
<p>graph is the instantiated object of graph class OlapBase</p>
<pre><code class="language-C++">/*
    Function Name:ReducedSum ProcessVertexActive(std::function&lt;ReducedSum(size_t)&gt; work, ParallelBitset &amp;active_vertices,
                ReducedSum zero = 0,std::function&lt;ReducedSum(ReducedSum, ReducedSum)&gt; reduce =reduce_plus&lt;ReducedSum&gt;)

    Function: Execute the work function for the node that corresponds to 1 in active_vertices. The third parameter represents the cumulative cardinality, which is 0 by default.

    The fourth parameter indicates that the iteration reduce function operation is performed on the return value of each node processed by work, and the default operation is the accumulation operation.

    For specific implementation, please refer to the specific code in /include/lgraph/olap_base



    Example: Output all the out-degree neighbors of nodes 1, 2, and 3 in the Graph, and count the total out-degree of these three nodes
*/

auto active_in = graph.AllocVertexSubset();
active_in.Add(1);
active_in.Add(2);
active_in.Add(3);
auto total_outdegree = graph.ProcessVertexActive&lt;size_t&gt;(
    [&amp;](size_t vi) {
        size_t local_outdegree = 0;
        for (auto &amp; edge : graph.OutEdges(vi)) {
            size_t dst = edge.neighbour;
            printf(&quot;node %lu has neighbour %lu\n&quot;,vi,dst);
            local_outdegree += 1;
        }
        return local_outdegree;
    },
    active_in
);
printf(&quot;total outdegree of node1,2,3 is %lu\n&quot;,total_outdegree);
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../1.tutorial/" class="btn btn-neutral float-left" title="Tutorial"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../3.olap-on-db-api/" class="btn btn-neutral float-right" title="OLAP on DB API">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../1.tutorial/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../3.olap-on-db-api/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/theme_extra.js" defer></script>
    <script src="../../../../js/theme.js" defer></script>
      <script src="../../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
