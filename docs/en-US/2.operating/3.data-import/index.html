<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Data Import - TuGraph Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Data Import";
        var mkdocs_page_input_path = "en-US\\2.operating\\3.data-import.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> TuGraph Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">en-US</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Guide</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../1.guide/1.what-is-graph/">What is Graph</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../1.guide/2.what-is-GDBMS/">What is GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../1.guide/3.quick-start/">Quick Start</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Operating</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../1.introduce/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../2.Install/">Install</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Data Import</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#csv-file-format-delimiter">CSV file format delimiter</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#the-configuration-file">The configuration file</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#configuration-file-format">Configuration File Format</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#example-configuration-file">Example Configuration File</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#offline-full-import">Offline full import</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#offline-import-example">Offline Import Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#online-incremental-import">Online incremental Import</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../4.server-config/">Server Config</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../5.operation/">Operation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../7.ha-mode/">HA Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../8.manage-database/">Manage Database</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../9.privilege/">Privilege</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Tools</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Developer Document</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../3.developer-document/1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../3.developer-document/2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../3.developer-document/3.procedure/">Procedure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Graph Analytics Engine</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../3.developer-document/4.graph_analytics_engine/1.tutorial/">Tutorial</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../3.developer-document/4.graph_analytics_engine/2.olap-base-api/">OLAP Base API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../3.developer-document/4.graph_analytics_engine/3.olap-on-db-api/">OLAP on DB API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../3.developer-document/4.graph_analytics_engine/4.olap-on-disk-api/">OLAP on Disk API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../3.developer-document/4.graph_analytics_engine/5.algorithms/">Algorithms</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../3.developer-document/4.graph_analytics_engine/6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Client</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../4.client/1.java-client/">Java Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../4.client/2.python-client/">Python Client</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../4.client/3.cpp-client/">CPP Client</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Supplement</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../5.supplement/changelog/">Changelog</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Community</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/1.contributing/">Contributing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/2.membership/">Membership</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/3.roadmap/">Roadmap</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/4.individual_cla/">Individual CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../6.community/5.corporate_cla/">Corporate CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">zh-CN</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">指南</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/1.guide/1.what-is-graph/">什么是图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/1.guide/2.what-is-GDBMS/">什么是 GDBMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/1.guide/3.quick-start/">快速入门</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">操作</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/1.introduce/">介绍</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/2.Install/">安装</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/3.data-import/">数据导入</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/4.server-config/">服务器配置</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/5.operation/">运维</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/7.ha-mode/">高可用模式</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/8.manage-database/">管理数据库</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/9.privilege/">权限</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/10.resource-monitoring/">资源监控</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/2.operating/11.integration-test/">集成测试</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">工具</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/1.tugraph-cypher/">TuGraph Cypher</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/2.tugraph-browser/">TuGraph Browser</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/3.tugraph-datax/">TuGraph DataX</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/2.operating/6.tools/4.tugraph-explore/">TuGraph Explore</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">开发者文档</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/3.developer-document/1.restful-api/">RESTful API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/3.developer-document/2.cypher/">Cypher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/3.developer-document/3.procedure/">Procedure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">图分析引擎</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/1.tutorial/">教程</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/2.olap-base-api/">OLAP 基本 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/3.olap-on-db-api/">OLAP 在数据库上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/4.olap-on-disk-api/">OLAP 在磁盘上的 API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/5.algorithms/">算法</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../zh-CN/3.developer-document/4.graph_analytics_engine/6.python-api/">Python API</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">客户端</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/1.java-client/">Java 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/2.python-client/">Python 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/3.cpp-client/">CPP 客户端</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/4.client/4.java-ogm/">Java OGM</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">补充</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/5.supplement/changelog/">更新日志</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">社区</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/1.contributing/">参与贡献</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/2.membership/">成员资格</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/3.roadmap/">路线图</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/4.individual_cla/">个人 CLA</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../zh-CN/6.community/5.corporate_cla/">企业 CLA</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">TuGraph Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>en-US &raquo;</li>
          <li>Operating &raquo;</li>
      <li>Data Import</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="data-importing">Data Importing</h1>
<blockquote>
<p>This document describes the data import function of TuGraph. These include delimiters in CSV format, sample formats for jsonline, and two modes for importing online and offline.</p>
</blockquote>
<p>After the installation is successful, you can use the <code>lgraph_import</code> batch import tool to import existing data into TuGraph. <code>lgraph_import</code> supports importing data from CSV files and JSON data sources.</p>
<blockquote>
<p><code>sonline format, a row of a json array string</code></p>
<p>CSV format</p>
</blockquote>
<pre><code>[movies.csv]
id, name, year, rating
tt0188766,King of Comedy,1999,7.3
tt0286112,Shaolin Soccer,2001,7.3
tt4701660,The Mermaid,2016,6.3
</code></pre>
<blockquote>
<p>jsonline format</p>
</blockquote>
<pre><code class="language-json">[&quot;tt0188766&quot;,&quot;King of Comedy&quot;,1999,7.3]
[&quot;tt0286112&quot;,&quot;Shaolin Soccer&quot;,2001,7.3]
[&quot;tt4701660&quot;,&quot;The Mermaid&quot;,2016,6.3]
</code></pre>
<p>TuGraph supports two data importing modes：</p>
<ul>
<li><em>offline</em>：Read the data and import it into a data file for the specified server, it should only be done when the server is offline.</li>
<li><em>online</em>：Read the data and send it to the running server, which then imports the data into its database.</li>
</ul>
<h2 id="csv-file-format-delimiter">CSV file format delimiter</h2>
<pre><code>CSV delimiters can be single-character or multi-character strings, which cannot contain 'r' or 'n'. Note that different shells handle input strings differently, so different escape handling may be required for different shell input parameters.
</code></pre>
<p>In addition, 'lgraph_import' also supports the following escape characters for entering special symbols:</p>
<table>
<thead>
<tr>
<th>Escape character</th>
<th>Instructions</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>The backslash<code>\\</code></td>
</tr>
<tr>
<td>\a</td>
<td>ASCII code 0x07</td>
</tr>
<tr>
<td>\f</td>
<td>form-feed，ASCII code 0x0c</td>
</tr>
<tr>
<td>\t</td>
<td>Horizontal tab characters， ASCII code 0x09</td>
</tr>
<tr>
<td>\v</td>
<td>Vertical tab characters， ASCII code 0x0b</td>
</tr>
<tr>
<td>\xnn</td>
<td>Two hexadecimal digits representing one byte，example \x9A</td>
</tr>
<tr>
<td>\nnn</td>
<td>A three-digit octal number representing a single byte，example \001, \443，data range cannot exceed 255</td>
</tr>
</tbody>
</table>
<p>Demo：</p>
<pre><code class="language-bash">$ ./lgraph_import -c ./import.config --delimiter &quot;\001\002&quot;
</code></pre>
<h2 id="the-configuration-file">The configuration file</h2>
<pre><code>`lgraph_import`tool configures the environment using the specified configuration file. The configuration file describes the paths to the input files, the vertices/edges they represent, and the vertex/edge format.
</code></pre>
<h3 id="configuration-file-format">Configuration File Format</h3>
<p>The configuration file consists of two parts: schema and files. The 'schema' part defines label, and the 'files' part describes the data files to be imported.</p>
<h4 id="the-keyword">The keyword</h4>
<ul>
<li>schema (Array）</li>
<li>label（required，string）</li>
<li>type（required， VERTEX or EDGE）</li>
<li>properties（Array，required for vertex，If there is no property for the edge, you can leave it unconfigured）<ul>
<li>name（required, string）</li>
<li>type （required,，BOOL，INT8，INT16，INT32，INT64，DATE，DATETIME，FLOAT，DOUBLE，STRING，BLOB）</li>
<li>optional（optional，Indicates that the field can be configured or not configured）</li>
<li>index（optional，Whether the field needs to be indexed）</li>
<li>unique（Optional, whether the field indexed and is of type unique）</li>
</ul>
</li>
<li>primary (Specify a property that uniquely identifies a point in the primary key field)</li>
<li>constraints (Edge-only configuration, optional, array form, start and end labels, unconfigured or empty means unrestricted)</li>
<li>files （Array）</li>
<li>path（required，string，The value can be a file path or a directory path. If it is a directory, all files in the directory will be imported. Ensure that they have the same schema）</li>
<li>header（Optional, numeric, header in the first few lines of the file, or 0）</li>
<li>format（required，JSON or CSV）</li>
<li>label（required，string）</li>
<li>columns（Array）<ul>
<li>SRC_ID (Special string，only on the edges,That means this column is the source data)</li>
<li>DST_ID (A special string, only on the edges, indicates that this column is the destination data)</li>
<li>SKIP   (A special string to skip this column of data)</li>
<li>[property]</li>
</ul>
</li>
<li>SRC_ID (Edge-only configuration. The value is the start label)</li>
<li>DST_ID (Edge-only configuration. The value is the destination point label)</li>
</ul>
<h3 id="example-configuration-file">Example Configuration File</h3>
<pre><code class="language-json">{
  &quot;schema&quot;: [
    {
      &quot;label&quot;: &quot;actor&quot;,
      &quot;type&quot;: &quot;VERTEX&quot;,
      &quot;properties&quot;: [
        { &quot;name&quot;: &quot;aid&quot;, &quot;type&quot;: &quot;STRING&quot; },
        { &quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;STRING&quot; }
      ],
      &quot;primary&quot;: &quot;aid&quot;
    },
    {
      &quot;label&quot;: &quot;movie&quot;,
      &quot;type&quot;: &quot;VERTEX&quot;,
      &quot;properties&quot;: [
        { &quot;name&quot;: &quot;mid&quot;, &quot;type&quot;: &quot;STRING&quot; },
        { &quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;STRING&quot; },
        { &quot;name&quot;: &quot;year&quot;, &quot;type&quot;: &quot;INT16&quot; },
        { &quot;name&quot;: &quot;rate&quot;, &quot;type&quot;: &quot;FLOAT&quot;, &quot;optional&quot;: true }
      ],
      &quot;primary&quot;: &quot;mid&quot;
    },
    {
      &quot;label&quot;: &quot;play_in&quot;,
      &quot;type&quot;: &quot;EDGE&quot;,
      &quot;properties&quot;: [{ &quot;name&quot;: &quot;role&quot;, &quot;type&quot;: &quot;STRING&quot;, &quot;optional&quot;: true }],
      &quot;constraints&quot;: [[&quot;actor&quot;, &quot;movie&quot;]]
    }
  ],
  &quot;files&quot;: [
    {
      &quot;path&quot;: &quot;actors.csv&quot;,
      &quot;header&quot;: 2,
      &quot;format&quot;: &quot;CSV&quot;,
      &quot;label&quot;: &quot;actor&quot;,
      &quot;columns&quot;: [&quot;aid&quot;, &quot;name&quot;]
    },
    {
      &quot;path&quot;: &quot;movies.csv&quot;,
      &quot;header&quot;: 2,
      &quot;format&quot;: &quot;CSV&quot;,
      &quot;label&quot;: &quot;movie&quot;,
      &quot;columns&quot;: [&quot;mid&quot;, &quot;name&quot;, &quot;year&quot;, &quot;rate&quot;]
    },
    {
      &quot;path&quot;: &quot;roles.csv&quot;,
      &quot;header&quot;: 2,
      &quot;format&quot;: &quot;CSV&quot;,
      &quot;label&quot;: &quot;play_in&quot;,
      &quot;SRC_ID&quot;: &quot;actor&quot;,
      &quot;DST_ID&quot;: &quot;movie&quot;,
      &quot;columns&quot;: [&quot;SRC_ID&quot;, &quot;role&quot;, &quot;DST_ID&quot;]
    }
  ]
}
</code></pre>
<p>For the above Example Configuration File, three labels defined: two point types' actor 'and' movie ', and one edge type 'role'. Each label describes: the name of the label, the type (dot or edge), which attribute fields are available, and the type of each field. For points, the primary field also defined; For edges, the constraints field also defined, which limits the starting and ending points of the edges.</p>
<p>It also describes three data files, two dot data files' actors.csv 'and' movies.csv ', and one edge data file 'roles.csv'. Each section describes the path of the file, the format of the data, the first few lines of the header, the label of the data, and the corresponding field of each column in each row of data in the file.</p>
<p>For the above configuration files, the import tool will first create labels' actor ', 'movie', and 'role' in TuGraph, and then perform data import of the three files.</p>
<h2 id="offline-full-import">Offline full import</h2>
<p>The offline mode can be used only on offline servers. An offline import creates a new graph, so it's more suitable for your first data import on a newly installed TuGraph server.</p>
<p>To use the 'lgraph_import' tool in offline mode, you can specify the 'lgraph_import --online false' option. To see the command-line options available, use 'lgraph_import --online false --help' :</p>
<pre><code class="language-shell">$ ./lgraph_import --online false -help
Available command line options:
    --log               Log file to use, empty means stderr. Default=&quot;&quot;.
    -v, --verbose       Verbose level to use, higher means more verbose.
                        Default=1.
    ...
    -h, --help          Print this help message. Default=0.
</code></pre>
<p>Command line arguments:</p>
<ul>
<li><strong>-c, --config_file</strong> <code>config_file</code>: Import the configuration file name in the following format:</li>
<li><strong>--log</strong> <code>log_dir</code>: Log directory. The default is an empty string, in which case the log information output to the console.</li>
<li><strong>--verbose</strong> <code>0/1/2</code>: Log level. The higher the log level, the more detailed the output information is. The default value is 1.</li>
<li><strong>-i, --continue_on_error</strong> <code>true/false</code>: If an error occurs, skip the error and continue. The default is false. If an error occurs, exit.</li>
<li><strong>-d, --dir</strong> <code>{diretory}</code>:The database directory to which the import tool will write data. Default is'./db '.</li>
<li><strong>--delimiter</strong> <code>{delimiter}</code>: Data file separator. This is used only when the data source is in CSV format. The default is', '。</li>
<li><strong>-u, --username</strong> <code>{user}</code>: Username of the database. You need to be an administrator to perform offline import.</li>
<li><strong>-p, --password</strong> <code>{password}</code>: Specifies the password of the database user</li>
<li><strong>--overwrite</strong> <code>true/false</code>: Whether to overwrite data. When set to true, the data directory overwritten if it already exists. Default to 'false'.</li>
<li><strong>-g, --graph</strong> <code>{graph_name}</code>: Specify the kind of graph to import.</li>
<li><strong>-h, --help</strong>: The help information displayed.</li>
</ul>
<h3 id="offline-import-example">Offline Import Example</h3>
<pre><code>In this example, we use the movie-actor data described above to demonstrate the use of the import tool. The data to be imported is divided into three files: 'movies.csv', 'actors.csv', and 'roles.csv'.
</code></pre>
<p>'movies.csv' contains information about movies, where each movie has an id (as a primary key for retrieval), and each movie also has attributes such as title, year, and rating. (Data from <a href="http://www.imdb.com">IMDb</a>).</p>
<pre><code>  [movies.csv]
  id, name, year, rating
  tt0188766,King of Comedy,1999,7.3
  tt0286112,Shaolin Soccer,2001,7.3
  tt4701660,The Mermaid,2016,6.3
</code></pre>
<blockquote>
<p>The jsonline format is as follows:
All fields can be strings, which will be converted to the corresponding type when imported</p>
</blockquote>
<pre><code class="language-json">[&quot;tt0188766&quot;,&quot;King of Comedy&quot;,1999,7.3]
[&quot;tt0286112&quot;,&quot;Shaolin Soccer&quot;,2001,7.3]
[&quot;tt4701660&quot;,&quot;The Mermaid&quot;,2016,6.3]
</code></pre>
<pre><code class="language-json">[&quot;tt0188766&quot;,&quot;King of Comedy&quot;,&quot;1999&quot;,&quot;7.3&quot;]
[&quot;tt0286112&quot;,&quot;Shaolin Soccer&quot;,&quot;2001&quot;,&quot;7.3&quot;]
[&quot;tt4701660&quot;,&quot;The Mermaid&quot;,&quot;2016&quot;,&quot;6.3&quot;]
</code></pre>
<p><code>actors.csv</code>It contains information about the actors. Each actor also has an id, as well as properties such as name.</p>
<pre><code>  [actors.csv]
  id, name
  nm015950,Stephen Chow
  nm0628806,Man-Tat Ng
  nm0156444,Cecilia Cheung
  nm2514879,Yuqi Zhang
</code></pre>
<blockquote>
<p>The corresponding jsonline format is as follows:</p>
</blockquote>
<pre><code class="language-json">[&quot;nm015950&quot;,&quot;Stephen Chow&quot;]
[&quot;nm0628806&quot;,&quot;Man-Tat Ng&quot;]
[&quot;nm0156444&quot;,&quot;Cecilia Cheung&quot;]
[&quot;nm2514879&quot;,&quot;Yuqi Zhang&quot;]
</code></pre>
<p><code>roles.csv</code>It contains information about which role an actor played in which movie. Each row records a character played by a given actor in a given movie, corresponding to an edge in the database.<code>SRC_ID</code> and <code>DST_ID</code> are the source and target vertices of the edge, which are the 'primary' properties defined in 'actors.csv' and 'movies.csv', respectively.</p>
<pre><code>  [roles.csv]
  actor, role, movie
  nm015950,Tianchou Yin,tt0188766
  nm015950,Steel Leg,tt0286112
  nm0628806,,tt0188766
  nm0628806,coach,tt0286112
  nm0156444,PiaoPiao Liu,tt0188766
  nm2514879,Ruolan Li,tt4701660
</code></pre>
<blockquote>
<p>The corresponding jsonline format is as follows:</p>
</blockquote>
<pre><code class="language-json">[&quot;nm015950&quot;,&quot;Tianchou Yin&quot;,&quot;tt0188766&quot;]
[&quot;nm015950&quot;,&quot;Steel Leg&quot;,&quot;tt0286112&quot;]
[&quot;nm0628806&quot;,null,&quot;tt0188766&quot;]
[&quot;nm0628806&quot;,&quot;coach&quot;,&quot;tt0286112&quot;]
[&quot;nm0156444&quot;,&quot;PiaoPiao Liu&quot;,&quot;tt0188766&quot;]
[&quot;nm2514879&quot;,&quot;Ruolan Li&quot;,&quot;tt4701660&quot;]
</code></pre>
<p>'configuration file import.conf', notice that there are two HEADER lines in each file, so we need to specify the 'HEADER=2' option.</p>
<pre><code class="language-json">{
  &quot;schema&quot;: [
    {
      &quot;label&quot;: &quot;actor&quot;,
      &quot;type&quot;: &quot;VERTEX&quot;,
      &quot;properties&quot;: [
        { &quot;name&quot;: &quot;aid&quot;, &quot;type&quot;: &quot;STRING&quot; },
        { &quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;STRING&quot; }
      ],
      &quot;primary&quot;: &quot;aid&quot;
    },
    {
      &quot;label&quot;: &quot;movie&quot;,
      &quot;type&quot;: &quot;VERTEX&quot;,
      &quot;properties&quot;: [
        { &quot;name&quot;: &quot;mid&quot;, &quot;type&quot;: &quot;STRING&quot; },
        { &quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;STRING&quot; },
        { &quot;name&quot;: &quot;year&quot;, &quot;type&quot;: &quot;INT16&quot; },
        { &quot;name&quot;: &quot;rate&quot;, &quot;type&quot;: &quot;FLOAT&quot;, &quot;optional&quot;: true }
      ],
      &quot;primary&quot;: &quot;mid&quot;
    },
    {
      &quot;label&quot;: &quot;play_in&quot;,
      &quot;type&quot;: &quot;EDGE&quot;,
      &quot;properties&quot;: [{ &quot;name&quot;: &quot;role&quot;, &quot;type&quot;: &quot;STRING&quot;, &quot;optional&quot;: true }],
      &quot;constraints&quot;: [[&quot;actor&quot;, &quot;movie&quot;]]
    }
  ],
  &quot;files&quot;: [
    {
      &quot;path&quot;: &quot;actors.csv&quot;,
      &quot;header&quot;: 2,
      &quot;format&quot;: &quot;CSV&quot;,
      &quot;label&quot;: &quot;actor&quot;,
      &quot;columns&quot;: [&quot;aid&quot;, &quot;name&quot;]
    },
    {
      &quot;path&quot;: &quot;movies.csv&quot;,
      &quot;header&quot;: 2,
      &quot;format&quot;: &quot;CSV&quot;,
      &quot;label&quot;: &quot;movie&quot;,
      &quot;columns&quot;: [&quot;mid&quot;, &quot;name&quot;, &quot;year&quot;, &quot;rate&quot;]
    },
    {
      &quot;path&quot;: &quot;roles.csv&quot;,
      &quot;header&quot;: 2,
      &quot;format&quot;: &quot;CSV&quot;,
      &quot;label&quot;: &quot;play_in&quot;,
      &quot;SRC_ID&quot;: &quot;actor&quot;,
      &quot;DST_ID&quot;: &quot;movie&quot;,
      &quot;columns&quot;: [&quot;SRC_ID&quot;, &quot;role&quot;, &quot;DST_ID&quot;]
    }
  ]
}
</code></pre>
<p>Using the import configuration file, we can now import data using the following command:</p>
<pre><code class="language-shell">$ ./lgraph_import
        -c import.conf             # Read configuration information from import.conf
        --dir /data/lgraph_db      # Store the data in /data/lgraph_db
        --graph mygraph            # Import the graph named mygraph
</code></pre>
<p><strong>Notice</strong>：</p>
<ul>
<li>If a graph named 'mygraph' already exists, the import tool will print an error message and exit. To force a graph to be overwritten, use the '--overwrite true' option.</li>
<li>Configuration and data files must be stored in UTF-8 encoding (or normal ASCII encoding, which is a subset of UTF-8). If any file uses an encoding other than UTF-8 (for example, UTF-8 with BOM or GBK), the import will fail and output a profiler error.</li>
</ul>
<h2 id="online-incremental-import">Online incremental Import</h2>
<pre><code>The online import mode can be used to import a batch of files into an already running instance of TuGraph. This is handy for processing incremental batch updates that typically occur at fixed intervals. The 'lgraph_import --online true' option enables the import tool to work in online mode. Like offline mode, online mode has its own set of command-line options, which can be printed using the '-h, --help' options:
</code></pre>
<pre><code class="language-shell">$ lgraph_import --online true -h
Available command line options:
    --online            Whether to import online.
    -h, --help          Print this help message. Default=0.

Available command line options:
    --log               Log file to use, empty means stderr. Default=&quot;&quot;.
    -v, --verbose       Verbose level to use, higher means more verbose.
                        Default=1.
    -c, --config_file   Config file path.
    -r, --url           DB REST API address.
    -u, --username      DB username.
    -p, --password      DB password.
    -i, --continue_on_error
                        When we hit a duplicate uid or missing uid, should we
                        continue or abort. Default=0.
    -g, --graph         The name of the graph to import into. Default=default.
    --skip_packages     How many packages should we skip. Default=0.
    --delimiter         Delimiter used in the CSV files
    --breakpoint_continue
                        When the transmission process is interrupted,whether
                        to re-transmit from zero package next time. Default=false
    -h, --help          Print this help message. Default=0.
</code></pre>
<p>The configuration related to the file specified in the configuration file, and its format is exactly the same as' offline mode '. However, instead of importing the data into a local database, we are now sending the data to a running TuGraph instance, which is typically running on a different computer than the client machine on which the import tool is running. Therefore, we need to specify the URL, DB user, and password for the HTTP address of the remote machine.</p>
<p>If the user and password are valid, and the specified graph exists, the import tool sends the data to the server, which then parses the data and writes it to the specified graph. The data will be sent in a packet of about 16 MB, interrupted at the nearest newline. Each package imported atomically, which means that if the package is successfully imported, all data is successfully imported; otherwise, none of the data enters the database. If '--continue_on_error true' is specified, data integrity errors are ignored and offending lines are ignored. Otherwise, the import stops at the first error package and prints out the number of packages that have been imported. In this case, the user can modify the data to eliminate errors, and then use '--skip_packages N' to redo the import to skip the imported packages.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../2.Install/" class="btn btn-neutral float-left" title="Install"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../4.server-config/" class="btn btn-neutral float-right" title="Server Config">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../2.Install/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../4.server-config/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
